(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{66:function(e,t,n){},69:function(e,t,n){},96:function(e,t,n){"use strict";n.r(t);var r=n(12),a=n(8),c=n.n(a),i=n(46),o=n.n(i),u=(n(66),n(15)),l=n.n(u),s=n(9),b=n(13),f=n(11),d=n(27),j=n(47),p=(n(69),n(7));function h(e){var t=function(e){return Object(p.a)(Array(e).keys())}(e.length),n=[],r=Object(p.a)(t),a=[];for(n.push(r[0]),r.splice(0,1);r.length>0;){for(var c=99999999999999,i=0,o=0,u=0;u<n.length;u++)for(var l=0;l<r.length;l++){var s=e[n[u]][r[l]];s<c&&0!==s&&(c=s,i=u,o=l)}a.push([n[i]+1,r[o]+1]),n.push(r[o]),r.splice(o,1)}return a}var g=n(54),O=n(53),v=n(20),m=n(10),x=Object.fromEntries(["\u0410","\u0411","\u0412","\u0413","\u0414","\u0415","\u0401","\u0416","\u0417","\u0418","\u0419","\u041a","\u041b","\u041c","\u041d","\u041e","\u041f","\u0420","\u0421","\u0422","\u0423","\u0424","\u0425","\u0426","\u0427","\u0428","\u0429","\u042a","\u042b","\u042c","\u042d","\u042e","\u042f"].map((function(e,t){return[e,"\u0426"===e?21:t+1]}))),k=function(e){return Array(e).fill(0)},y=function(e,t){return e.map((function(e,n){return e.map((function(e,r){return t(e,[n,r])}))}))};function S(e,t,n){var r,a=(r=e,Object(p.a)(new Set(r.toUpperCase().replace(" ","").split(""))).map((function(e){return x[e]}))).slice(0,t),c=k(a.length).map((function(e){return k(a.length)})),i=y(c,(function(e,t){var n=Object(f.a)(t,2),r=n[0],c=n[1];return Math.abs(a[c]-a[r])}));return{helperMatrix:i,adjacencyMatrix:y(i,(function(e,t){var r=Object(f.a)(t,2),a=r[0],c=r[1];return Number(n.some((function(t){return e%t===0&&a!==c?1:0})))}))}}var w={dark:{primary:"white",background:"black",secondary:"lightgrey",text:"darkgrey",accent:"red"},light:{primary:"black",background:"white",secondary:"black",text:"darkgrey",accent:"red"}},C=Object(m.createEvent)("toggleTheme"),F=Object(m.createEvent)("toggleMode"),M=Object(m.createEvent)("loadGraphFromFile"),E=Object(m.createEvent)("loadGraphFromGV"),P=Object(m.createEvent)("setName"),T=Object(m.createEvent)("setSize"),N=Object(m.createEvent)("setDividers"),D=Object(m.createEffect)({name:"fxLoadGraphFromFile",handler:function(e){return new Promise((function(t,n){var r;e.preventDefault();var a=new FileReader;a.onload=function(){var e=Object(d.a)(l.a.mark((function e(n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=null===(r=n.target)||void 0===r?void 0:r.result,console.log("File loaded",{text:a}),t(String(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var c=null===(r=e.target.files)||void 0===r?void 0:r[0];console.log({fileBlob:c,files:e.target.files}),c?(console.log("Begin loading file"),a.readAsText(c)):n("Error: can't begin reading the file: file is null")}))}}),G=Object(m.createStore)("dark",{name:"$theme"}).on(C,(function(e){return"dark"===e?"light":"dark"})),A=Object(m.createStore)("3D").on(F,(function(e){return"3D"===e?"2D":"3D"})),I=G.map((function(e){return w[e]})),B=[[0,2,5,100,0,0,0],[2,0,2,0,7,0,0],[5,2,0,1,4,3,0],[100,0,1,0,0,4,0],[0,7,4,0,0,1,5],[0,0,3,4,1,0,7],[0,0,0,0,5,7,0]].map((function(e){return e.join(" ")})).join("\n"),z=Object(m.createEvent)("setHilightedSubGraph"),L=Object(m.createEvent)("toggleIsHighlighted"),H=(Object(m.createStore)(!1).on(L,(function(e){return!e})),Object(m.createStore)([[]])),R=Object(m.restore)(z,{links:[],nodes:[]}).reset(M,E),$=Object(m.createStore)(B,{name:"$fileContents"}).on(D.doneData,(function(e,t){return t})),J=Object(m.restore)(P,"\u0417\u0430\u0439\u0446\u0435\u0432 \u0415\u0432\u0433\u0435\u043d\u0438\u0439 \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440\u043e\u0432\u0438\u0447"),U=Object(m.restore)(T,"7"),V=Object(m.restore)(N,"2 3"),q=Object(m.createStore)({links:[],nodes:[]},{name:"$graph"}).on(H,(function(e,t){return{nodes:(n=t).map((function(e,t){return{id:t+1}})),links:function(e,t){return e.map((function(e,n){return e.map((function(e,r){return t(e,[n,r])}))}))}(n,(function(e,t){var n=Object(f.a)(t,2),r=n[0],a=n[1];return e?[{source:r+1,target:a+1,weight:e}]:[]})).flat(2)};var n}));Object(m.sample)({clock:E,source:Object(m.combine)(J,U,V),fn:function(e){var t=Object(f.a)(e,3),n=t[0],r=t[1],a=t[2];return S(n.replace(" ",""),isNaN(Number(r))?7:Number(r),a.split(" ").map((function(e){return isNaN(Number(e))?1:Number(e)}))).adjacencyMatrix},target:H}),Object(m.sample)({clock:M,source:$,fn:function(e){return e.split("\n").map((function(e){return e.split(" ").map(Number)}))},target:H});var W=n(30),K=n(1),Q=20;function X(e){var t=e.colors,n=e.highlightedSubGraph;return function(e){var r=e.id,a=new K.H(10,Q,Q),c=n.nodes.find((function(e){return r===e.id})),i=new K.u({color:c?t.accent:t.primary,transparent:!0,opacity:.75}),o=new W.a(String(r),8,t.text),u=new K.s(a,i),l=new K.v;return l.add(u),l.add(o),l}}function Y(e){var t=e.colors;e.highlightedSubGraph;return function(e){var n=e.weight,r=new W.a("".concat(n));r.color=t.primary,r.backgroundColor="transparent",r.textHeight=5;var a=new K.v;return a.add(r),a}}var Z=n(6);function _(e){var t=e.colors;return function(e,n){var r=e.source,a=e.target;if("object"===typeof r&&"object"===typeof a){var c=Object.assign.apply(Object,Object(p.a)(["x","y"].map((function(e){return Object(Z.a)({},e,r[e]+(a[e]-r[e])/2)})))),i={x:a.x-r.x,y:a.y-(null===r||void 0===r?void 0:r.y)},o=Math.atan2(i.y,i.x);o>Math.PI/2&&(o=-(Math.PI-o)),o<-Math.PI/2&&(o=-(-Math.PI-o));var u=e.weight,l=String(u),s=n.measureText(l).width;n.font="".concat(20,"px Sans-Serif"),n.save(),n.translate(c.x,c.y),n.rotate(o),n.fillStyle=t.background,n.beginPath(),n.rect(-2-s/2,-10,s+4,20),n.fill(),n.textAlign="center",n.textBaseline="middle",n.fillStyle=t.primary,n.fillText(l,0,0),n.restore()}}}function ee(e,t){var n=t.start,r=t.end,a=Object.assign.apply(Object,Object(p.a)(["x","y","z"].map((function(e){return Object(Z.a)({},e,n[e]+(r[e]-n[e])/2)}))));return Object.assign(e.position,a),!1}function te(e){var t=e.colors,n=e.highlightedSubGraph;return function(e,r,a){var c=e.id,i=e.x,o=e.y,u=String(c),l=n.nodes.find((function(e){return c===e.id}));r.fillStyle=l?t.accent:t.background,r.strokeStyle=t.primary,r.beginPath(),r.arc(i,o,30,0,2*Math.PI,!1),r.fill(),r.stroke(),r.closePath(),r.textBaseline="middle",r.font="".concat(20,"px Sans-Serif"),r.textAlign="center",r.fillStyle=t.primary,r.fillText(u,i,o)}}var ne=l.a.mark(ae),re=function(e){return Object(p.a)(Array(e).keys())};function ae(e){var t,n,r,a,c,i,o,u,s,b,f;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:t=e.length,n=re(t),r=[],a=Object(p.a)(n),c=[],r.push(a[0]),a.splice(0,1);case 7:if(!(a.length>0)){l.next=19;break}for(i=99999999999999,o=0,u=0,s=0;s<r.length;s++)for(b=0;b<a.length;b++)(f=e[r[s]][a[b]])<i&&0!==f&&(i=f,o=s,u=b);return c.push([r[o]+1,a[u]+1]),l.next=15,c;case 15:r.push(a[u]),a.splice(u,1),l.next=7;break;case 19:return l.abrupt("return",c);case 20:case"end":return l.stop()}}),ne)}function ce(e){return new Promise((function(t){return setTimeout(t,1e3*e)}))}var ie=function(){var e=Object(v.a)(I),t=Object(v.a)(A),n=Object(v.a)(q),c=Object(v.a)(H),i=Object(v.a)(J),o=Object(v.a)(U),u=Object(v.a)(V),p=Object(v.a)(R),m=Object(a.useRef)(),x=Object(a.useRef)();function k(e){return function(t){e(t.currentTarget.value)}}Object(a.useEffect)((function(){var e,t,n;null===(e=m.current)||void 0===e||e.d3Force("charge").strength(-500),null===(t=x.current)||void 0===t||t.d3Force("link").distance(500),null===(n=x.current)||void 0===n||n.d3Force("charge").strength(-500)}));var y={graphData:n,backgroundColor:e.background,nodeColor:function(){return e.primary},linkColor:function(t){var n=t.source,r=t.target;return p.links.find((function(e){return e.source===n.id&&e.target===r.id}))?e.accent:e.secondary},linkWidth:function(e){var t=e.source,n=e.target;return p.links.find((function(e){return e.source===t.id&&e.target===n.id}))?6:2}};function S(){return(S=Object(d.a)(l.a.mark((function e(t){var n,r,a,i,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ae(c),r=Object(s.a)(n),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=13;break}return i=a.value,o=i.map((function(e){var t=Object(f.a)(e,2);return{source:t[0],target:t[1]}})),u=Object(j.uniqBy)(i.flatMap((function(e){var t=Object(f.a)(e,2);return[{id:t[0]},{id:t[1]}]})),"id"),z({nodes:u,links:o}),e.next=11,ce(.5);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})))).apply(this,arguments)}var w={colors:e,highlightedSubGraph:p};return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)("button",{onClick:C,children:"Theme"}),Object(r.jsx)("button",{onClick:F,children:"Mode"}),Object(r.jsx)("input",{type:"file",onChange:D}),Object(r.jsx)("button",{onClick:M,children:"Load From File"}),Object(r.jsx)("br",{}),Object(r.jsx)("label",{htmlFor:"name",children:"\u0418\u043c\u044f: "}),Object(r.jsx)("input",{type:"text",name:"name",value:i,onChange:k(P)}),Object(r.jsx)("label",{htmlFor:"size",children:"\u0420\u0430\u0437\u043c\u0435\u0440: "}),Object(r.jsx)("input",{type:"text",name:"size",value:o,onChange:k(T)}),Object(r.jsx)("label",{htmlFor:"dividers",children:"\u0414\u0435\u043b\u0438\u0442\u0435\u043b\u0438: "}),Object(r.jsx)("input",{type:"text",name:"dividers",value:u,onChange:k(N)}),Object(r.jsx)("button",{onClick:E,children:"Load From GV"}),Object(r.jsx)("button",{onClick:function(e){var t=h(c).map((function(e){var t=Object(f.a)(e,2);return{source:t[0],target:t[1]}})),n=c.map((function(e,t){return{id:t+1}}));z({nodes:n,links:t})},children:"Calculate Prim's MST"}),Object(r.jsx)("button",{onClick:function(e){return S.apply(this,arguments)},children:"Animate Prim's MST"}),"3D"===t?Object(r.jsx)(g.a,Object(b.a)(Object(b.a)({},y),{},{ref:m,nodeThreeObject:X(w),linkThreeObject:Y(w),linkThreeObjectExtend:!0,linkPositionUpdate:ee})):Object(r.jsx)(O.a,Object(b.a)(Object(b.a)({},y),{},{ref:x,nodeColor:e.primary,nodeCanvasObjectMode:function(){return"after"},nodeCanvasObject:te(w),linkCanvasObjectMode:function(){return"after"},linkCanvasObject:_(w),nodeRelSize:10}))]})},oe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,108)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ie,{})}),document.getElementById("root")),oe()}},[[96,1,2]]]);
//# sourceMappingURL=main.6c4f5c8c.chunk.js.map